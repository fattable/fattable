(function(){function G(c,a){function b(){this.constructor=c}for(var d in a)M.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.da=a.prototype}var H,y,u,z,I,v,w,A,J,t,K,B,C,D,E,F,L,M={}.hasOwnProperty;K=function(c){var a,b,d,g,e;a=[0];d=g=0;for(b=c.length;d<b;d++)e=c[d],g+=e,a.push(g);return a};t=function(c,a,b){return c<a?a:c>b?b:c};B=new (function(){function c(){this.S=[];this.ba=this.result=!1}c.prototype.then=function(a){return this.ba?a(this.result):this.S.push(a)};c.prototype.resolve=
function(a){var b,d,c,e,f;this.ba=!0;this.result=a;e=this.S;f=[];c=0;for(d=e.length;c<d;c++)b=e[c],f.push(b(a));return f};return c}());E=function(){document.removeEventListener("DOMContentLoaded",E);return B.resolve()};document.addEventListener("DOMContentLoaded",E);F=function(){var c,a,b,d,g;c=document.createElement("div");d=["transform","WebkitTransform","MozTransform","OTransform","MsTransform"];b=0;for(a=d.length;b<a;b++)if(g=d[b],void 0!==c.style[g])return g}();w=function(){function c(){}c.prototype.C=
function(){return!1};c.prototype.Z=function(){return!1};c.prototype.u=function(a,b,d){null==d&&(d=function(){});return d("getCell not implemented")};c.prototype.v=function(a,b){null==b&&(b=function(){});return b("getHeader not implemented")};return c}();v=function(c){function a(){return a.da.constructor.apply(this,arguments)}G(a,c);a.prototype.ia=function(b,a){return b+","+a};a.prototype.ja=function(b){return"col "+b};a.prototype.C=function(){return!0};a.prototype.Z=function(){return!0};a.prototype.u=
function(b,a,c){null==c&&(c=function(){});return c(this.ia(b,a))};a.prototype.v=function(b,a){null==a&&(a=function(){});return a(this.ja(b))};return a}(w);y=function(){function c(a){this.size=null!=a?a:100;this.data={};this.B=[]}c.prototype.O=function(){return this.data.hasOwnProperty(void 0)};c.prototype.get=function(a){return this.data[a]};c.prototype.set=function(a,b){var d;d=this.B.indexOf(a);0<=d&&this.B.splice(d,1);this.B.push(a);this.B.length>=this.size&&(d=this.B.shift(),delete this.data[d]);
return this.data[a]=b};return c}();u=function(c){function a(b){null==b&&(b=100);this.Q=new y(b);this.P=new y(b);this.M={};this.w={}}G(a,c);a.prototype.v=function(b){if(this.P.O())return cb(this.P.get(void 0)(b));if(null!=this.w[void 0])return this.w[void 0].push([b,cb]);this.w[void 0]=[[b,cb]];return this.Fa(void 0,function(a){return function(c){var e,f,k,h;a.P.set(void 0,c);h=a.w[void 0];k=0;for(f=h.length;k<f;k++)e=h[k],b=e[0],e=e[1],e(c(b));return delete a.w[void 0]}}(this))};a.prototype.C=function(){return this.Q.O()};
a.prototype.u=function(a,d,c){null==c&&(c=function(){});if(this.Q.O())return c(this.Q.get(void 0)(a,d));if(null!=this.M[void 0])return this.M[void 0].push([a,d,c]);this.M[void 0]=[[a,d,c]]};a.prototype.v=function(a,d){null==d&&(d=function(){});return d("col "+a)};return a}(w);J=function(c,a){var b,d,g,e;if(c[0]>a)return 0;b=0;for(d=c.length;b+2<d;)if(g=(b+d)/2|0,e=c[g],e<a)b=g;else if(e>a)d=g;else return g;return b};z=function(){function c(){}c.prototype.J=function(a){var b,d;d=a.cells;for(b in d);
a=a.j;d=[];for(b in a)d.push(void 0);return d};c.prototype.W=function(a,b){return a.textContent=b};c.prototype.N=function(a,b){return a.textContent=b};c.prototype.ha=function(a){a.textContent="NA"};c.prototype.V=function(a){return a.textContent="NA"};return c}();L=function(c,a){var b,d;b=1;for(d=0;d+b<c.length;)c[d+b]-c[d]>a?d+=1:b+=1;return b};H=function(){function c(){this.I=[]}c.prototype.bind=function(a,b,d){this.I.push([a,b,d]);return a.addEventListener(b,d)};c.prototype.sa=function(){var a,
b,d,c,e,f;e=this.I;c=0;for(d=e.length;c<d;c++)a=e[c],f=a[0],b=a[1],a=a[2],f.removeEventListener(b,a);this.I=[]};return c}();I=function(){function c(a,b,c,g,e,f,k){var h,l;this.a=a;this.b=b;this.q=c;this.p=g;this.visible=null!=f?f:!0;this.T=null!=k?k:!0;this.e=document.createElement("div");this.e.className+=" fattable-v-scrollbar";this.d=document.createElement("div");this.d.className+=" fattable-h-scrollbar";this.visible&&(this.a.appendChild(this.e),this.a.appendChild(this.d));a=document.createElement("div");
a.style.height="1px";a.style.width=this.q+"px";b=document.createElement("div");b.style.width="1px";b.style.height=this.p+"px";this.d.appendChild(a);this.e.appendChild(b);this.ca=Math.max(this.d.offsetHeight,this.e.offsetWidth);this.e.style.bottom=this.ca+"px";this.d.style.right=this.ca+"px";this.scrollTop=this.scrollLeft=0;this.d.onscroll=function(a){return function(){if(!a.o&&a.scrollLeft!==a.d.scrollLeft)return a.scrollLeft=a.d.scrollLeft,a.n(a.scrollLeft,a.scrollTop)}}(this);this.e.onscroll=function(a){return function(){if(!a.o&&
a.scrollTop!==a.e.scrollTop)return a.scrollTop=a.e.scrollTop,a.n(a.scrollLeft,a.scrollTop)}}(this);this.T&&(e.bind(this.a,"mousedown",function(a){return function(b){if(1===b.button)return a.o=!0,a.a.className="fattable-body-container fattable-moving",a.L=a.scrollLeft+b.clientX,a.ga=a.scrollTop+b.clientY}}(this)),e.bind(this.a,"mouseup",function(a){return function(){a.o=!1;return a.a.className="fattable-body-container"}}(this)),e.bind(this.a,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c,
d;if(a.o)return c=-b.clientX+a.L,d=-b.clientY+a.ga,a.H(c,d)},0)}}(this)),e.bind(this.a,"mouseout",function(a){return function(b){if(a.o&&(null==b.toElement||b.toElement.parentElement.parentElement!==a.a))return a.a.className="fattable-body-container",a.o=!1}}(this)),e.bind(this.b,"mousedown",function(a){return function(b){if(1===b.button)return a.D=!0,a.b.className="fattable-header-container fattable-moving",a.L=a.scrollLeft+b.clientX}}(this)),e.bind(this.a,"mouseup",function(a){return function(b){var c;
if(1===b.button)return a.D=!1,a.b.className="fattable-header-container",b.stopPropagation(),c=function(a){a.stopPropagation();return this.removeEventListener("click",c,!0)},a.a.addEventListener("click",c,!0)}}(this)),e.bind(this.b,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c;if(a.D)return c=-b.clientX+a.L,a.H(c)},0)}}(this)),e.bind(this.b,"mouseout",function(a){return function(b){if(a.D){if(null==b.toElement||b.toElement.parentElement.parentElement!==a.b)a.b.className=
"fattable-header-container";return a.D=!1}}}(this)));this.la=this.q>this.d.clientWidth?this.q-this.d.clientWidth:0;this.ma=this.p>this.e.clientHeight?this.p-this.e.clientHeight:0;l="DOMMouseScroll";void 0!==this.a.onwheel?l="wheel":void 0!==this.a.onmousewheel&&(l="mousewheel");h=function(){switch(l){case "wheel":return function(a){var b,c,d,e,h,f;switch(a.Da){case a.ta:b=null!=(d=-50*a.ea)?d:0;c=null!=(e=-50*a.fa)?e:0;break;case a.ua:b=null!=(h=-1*a.ea)?h:0,c=null!=(f=-1*a.fa)?f:0}return[b,c]};case "mousewheel":return function(a){var b,
c,d;b=null!=(c=a.wheelDeltaX)?c:0;a=null!=(d=a.wheelDeltaY)?d:a.wheelDelta;return[b,a]};case "DOMMouseScroll":return function(a){var b,c;c=b=0;a.axis===a.va?b=-50*a.detail:c=-50*a.detail;return[b,c]}}}();a=function(a){return function(b){var c;c=h(b);if(a.H(a.scrollLeft-c[0],a.scrollTop-c[1]))return b.preventDefault()}}(this);b=function(a){return function(b){var c;c=h(b);if(a.H(a.scrollLeft-c[0],a.scrollTop))return b.preventDefault()}}(this);e.bind(this.a,l,a);e.bind(this.b,l,b)}c.prototype.n=function(){};
c.prototype.H=function(a,b){var c;c=!1;null!=a?(a=t(a,0,this.la),this.scrollLeft!==a&&(c=!0,this.scrollLeft=a)):a=this.scrollLeft;null!=b?(b=t(b,0,this.ma),this.scrollTop!==b&&(c=!0,this.scrollTop=b)):b=this.scrollTop;this.d.scrollLeft=a;this.e.scrollTop=b;this.n(a,b);return c};return c}();A=function(){function c(a){var b;b=a.a;if(null==b)throw"container not specified.";if("string"===typeof b)this.a=document.querySelector(b);else if("object"===typeof b)this.a=b;else throw"Container must be a string or a dom element.";
this.g(a,"painter",new z);this.g(a,"autoSetup",!0);this.g(a,"model");this.g(a,"nbRows");this.g(a,"rowHeight");this.g(a,"columnWidths");this.g(a,"rowHeight");this.g(a,"headerHeight");this.g(a,"scrollBarVisible",!0);this.g(a,"enableDragMove",!0);this.pa=this.K.length;-1===(" "+this.a.className+" ").search(/\sfattable\s/)&&(this.a.className+=" fattable");this.p=this.G*this.$;this.s=K(this.K);this.q=this.s[this.s.length-1];this.j={};this.cells={};this.U=new H;this.X();this.Ca&&B.then(function(a){return function(){return a.ra()}}(this))}
c.prototype.g=function(a,b,c){if(null==a[b]){if(void 0===c)throw"Expected parameter <"+b+">";this[b]=c}else this[b]=a[b]};c.prototype.X=function(){this.R=this.a.offsetWidth;this.Y=this.a.offsetHeight-this.F;this.f=Math.min(L(this.s,this.R)+2,this.K.length);this.h=Math.min((this.Y/this.G|0)+2,this.$)};c.prototype.ka=function(a,b){return[t(b/this.G|0,0,this.$-this.h),t(J(this.s,a),0,this.pa-this.f)]};c.prototype.J=function(){var a;this.U.sa();null!=(a=this.ya)&&(a.n=null);this.k.J(this);this.a.innerHTML=
"";return this.b=this.i=null};c.prototype.ra=function(){var a,b,c,g,e,f,k;this.J();this.X();this.j={};this.cells={};this.a.innerHTML="";this.b=document.createElement("div");this.b.className+=" fattable-header-container";this.b.style.height=this.F+"px";this.A=document.createElement("div");this.A.className="fattable-viewport";this.A.style.width=this.R+"px";this.A.style.height=this.F+"px";this.b.appendChild(this.A);this.i=document.createElement("div");this.i.className="fattable-body-container";this.i.style.top=
this.F+"px";this.r=document.createElement("div");this.r.className="fattable-viewport";this.r.style.width=this.R+"px";this.r.style.height=this.Y+"px";g=a=this.f;for(f=2*this.f;a<f;g=a+=1)for(c=e=this.h,k=2*this.h;e<k;c=e+=1)b=document.createElement("div"),b.c=!1,b.style.height=this.G+"px",this.r.appendChild(b),this.cells[c+","+g]=b;a=e=this.f;for(f=2*this.f;e<f;a=e+=1)b=document.createElement("div"),b.style.height=this.F+"px",b.c=!1,this.j[a]=b,this.A.appendChild(b);this.t=this.h;this.l=this.f;this.display(0,
0);this.a.appendChild(this.i);this.a.appendChild(this.b);this.i.appendChild(this.r);this.aa();this.scroll=new I(this.i,this.b,this.q,this.p,this.U,this.Ga,this.T);b=function(a){return function(b,e){var f,m,n;m=a.ka(b,e);c=m[0];g=m[1];a.display(c,g);n=a.j;for(f in n)m=n[f],m.style[F]="translate("+(m.left-b)+"px, 0px)";n=a.cells;for(f in n)m=n[f],m.style[F]="translate("+(m.left-b)+"px,"+(m.top-e)+"px)";clearTimeout(a.qa);a.qa=setTimeout(a.aa.bind(a),200);return a.n(b,e)}}(this);this.scroll.n=b;return b(0,
0)};c.prototype.aa=function(a){var b,c,g,e,f,k,h,l,p;null==a&&(a=!1);c=function(b){return function(c){if(a||c.c)return b.m.v(f,function(a){c.c=!1;return b.k.W(c,a)})}}(this);p=[];f=h=this.l;for(l=this.l+this.f;h<l;f=h+=1)g=this.j[f],c(g),p.push(function(){var c,d,g;g=[];e=c=this.t;for(d=this.t+this.h;c<d;e=c+=1)k=e+","+f,b=this.cells[k],a||b.c?g.push(function(a){return function(b){return a.m.u(e,f,function(c){b.c=!1;return a.k.N(b,c)})}}(this)(b)):g.push(void 0);return g}.call(this));return p};c.prototype.n=
function(){};c.prototype.display=function(a,b){this.b.style.display="none";this.i.style.display="none";this.na(b);this.oa(a);this.b.style.display="";return this.i.style.display=""};c.prototype.na=function(a){var b,c,g,e,f,k,h,l,p,q,m,n,r,s,x;q=this.t;x=a-this.l;if(0!==x){f=Math.min(Math.abs(x),this.f);for(b=m=0;m<f;b=m+=1)for(0<x?(r=this.l+b,e=a+b+this.f-f):(r=this.l+this.f-f+b,e=a+b),g=this.s[e],c=this.K[e]+"px",h=this.j[r],delete this.j[r],this.m.Z(e)?this.m.v(e,function(a){return function(b){h.c=
!1;return a.k.W(h,b)}}(this)):h.c||(h.c=!0,this.k.ha(h)),h.left=g,h.style.width=c,this.j[e]=h,k=function(a){return function(b){if(a.m.C(l,e))return a.m.u(l,e,function(c){b.c=!1;return a.k.N(b,c)});if(!b.c)return b.c=!0,a.k.V(b)}}(this),l=n=q,s=q+this.h;n<s;l=n+=1)p=l+","+r,b=this.cells[p],delete this.cells[p],this.cells[l+","+e]=b,b.left=g,b.style.width=c,k(b);this.l=a}};c.prototype.oa=function(a){var b,c,g,e,f,k,h,l,p,q,m,n,r,s;h=this.t;l=this.l;s=a-h;if(0!==s){g=Math.min(Math.abs(s),this.h);for(b=
p=0;p<g;b=p+=1)for(0<s?(m=h+b,c=a+b+this.h-g):(m=h+this.h-g+b,c=a+b),r=c*this.G,e=function(a){return function(b){if(a.m.C(c,f))return a.m.u(c,f,function(c){b.c=!1;return a.k.N(b,c)});if(!b.c)return b.c=!0,a.k.V(b)}}(this),f=q=l,n=l+this.f;q<n;f=q+=1)k=m+","+f,b=this.cells[k],delete this.cells[k],this.cells[c+","+f]=b,b.top=r,e(b);this.t=a}};return c}();C=function(c){return new A(c)};u={Aa:w,Ba:A,xa:z,wa:u,za:v,bound:t};for(D in u)v=u[D],C[D]=v;window.Ea=C}).call(this);
